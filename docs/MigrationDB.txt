services.AddDbContext<ProductContext>(m => 
    m.UseMySql(builder.ConnectionString,
               ServerVersion.AutoDetect(builder.ConnectionString),
               e => {
                   e.MigrationsAssembly("Product.API");
                   e.SchemaBehavior(MySqlSchemaBehavior.Ignore);
               }));

üß© Gi·∫£i th√≠ch chi ti·∫øt:

    services.AddDbContext<ProductContext>(...)
        ƒêƒÉng k√Ω ProductContext v√†o dependency injection container.

        Cho ph√©p ASP.NET Core t·∫°o v√† qu·∫£n l√Ω lifecycle c·ªßa ProductContext.

    m.UseMySql(...)
        S·ª≠ d·ª•ng MySQL l√†m database provider cho Entity Framework Core.

        C·∫•u h√¨nh ProductContext ƒë·ªÉ k·∫øt n·ªëi ƒë·∫øn m·ªôt database MySQL.

    ServerVersion.AutoDetect(...)
        D√πng ƒë·ªÉ t·ª± ƒë·ªông ph√°t hi·ªán phi√™n b·∫£n MySQL ƒëang d√πng.

        Quan tr·ªçng ƒë·ªÉ EF Core bi·∫øt c√°ch sinh SQL t∆∞∆°ng th√≠ch v·ªõi phi√™n b·∫£n MySQL ƒë√≥.

    e.MigrationsAssembly("Product.API")
        Ch·ªâ ƒë·ªãnh assembly ch·ª©a migration.

        Th∆∞·ªùng d√πng khi b·∫°n t√°ch c√°c project (v√≠ d·ª•: DbContext ·ªü project Infrastructure, c√≤n migration n·∫±m ·ªü Product.API).

        C·∫ßn thi·∫øt ƒë·ªÉ EF bi·∫øt l·∫•y migration ·ªü ƒë√¢u khi ch·∫°y update-database ho·∫∑c add-migration.

    e.SchemaBehavior(MySqlSchemaBehavior.Ignore)
        MySQL kh√¥ng h·ªó tr·ª£ schema nh∆∞ SQL Server.

        Ignore gi√∫p EF b·ªè qua schema khi t·∫°o migration ho·∫∑c truy v·∫•n, tr√°nh l·ªói kh√¥ng t∆∞∆°ng th√≠ch.

--------------------------------------------------------------------------------------------------------------------------------
L·ªói:
    Unable to create a 'DbContext' of type ''. 
    The exception 'Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContextOptions`1[Product.API.Persistences.ProductContext]' 
    while attempting to activate 'Product.API.Persistences.ProductContext'.' was thrown while attempting to create an instance.

‚ùì T·∫°i sao l·ªói n√†y x·∫£y ra?
    Entity Framework Core khi ch·∫°y c√°c l·ªánh design-time nh∆∞:

        Add-Migration

        Update-Database

        Script-Migration

    ... th√¨ n√≥ c·∫ßn t·ª± kh·ªüi t·∫°o m·ªôt instance c·ªßa DbContext (·ªü ƒë√¢y l√† ProductContext) m√† kh√¥ng ch·∫°y ·ª©ng d·ª•ng.

    ‚û°Ô∏è Nh∆∞ng trong code c·ªßa b·∫°n, ProductContext ƒëang ƒë∆∞·ª£c c·∫•u h√¨nh th√¥ng qua Dependency Injection (DI) 
    ·ªü Program.cs ho·∫∑c Startup.cs, v√≠ d·ª•:

        services.AddDbContext<ProductContext>(...);

    V√¨ v·∫≠y khi ch·∫°y l·ªánh t·ª´ terminal/Package Manager, EF kh√¥ng th·ªÉ truy c·∫≠p ƒë∆∞·ª£c container DI => d·∫´n ƒë·∫øn l·ªói:

-----------------------------------------------------------

‚úÖ C√°ch gi·∫£i quy·∫øt ƒë√∫ng theo t√†i li·ªáu ch√≠nh th·ª©c
    Entity Framework h·ªó tr·ª£ m·ªôt giao di·ªán ƒë·∫∑c bi·ªát ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y:

    IDesignTimeDbContextFactory<TContext>
        Khi b·∫°n t·∫°o m·ªôt class implement giao di·ªán n√†y, EF s·∫Ω ∆∞u ti√™n d√πng n√≥ ƒë·ªÉ kh·ªüi t·∫°o DbContext ·ªü design-time.

        B·∫°n c√≥ th·ªÉ t·ª± cung c·∫•p connection string, c·∫•u h√¨nh, v.v...

====================================================================================================================
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Design;

namespace Product.API.Persistences
{
    public class ProductContextFactory : IDesignTimeDbContextFactory<ProductContext>
    {
        public ProductContext CreateDbContext(string[] args)
        {
            var optionsBuilder = new DbContextOptionsBuilder<ProductContext>();
            var connectionString = "server=localhost;database=ProductDB;user=root;password=123456";

            optionsBuilder.UseMySql(connectionString, ServerVersion.AutoDetect(connectionString), e =>
            {
                e.MigrationsAssembly("Product.API");
                e.SchemaBehavior(MySqlSchemaBehavior.Ignore);
            });

            return new ProductContext(optionsBuilder.Options);
        }
    }
}
=====================================================================================================================
